graph TB
    %% Frontend
    FRONTEND[Frontend Angular<br/>Interface utilisateur]
    
    %% API Gateway - Point d'entr√©e unique
    subgraph "API GATEWAY"
        GATEWAY[API Gateway<br/>üö™ Point d'entr√©e unique<br/>- Authentification<br/>- Rate limiting<br/>- Routage des requ√™tes<br/>- Agr√©gation des r√©ponses]
    end
    
    %% Microservices m√©tier
    subgraph "MICROSERVICES M√âTIER"
        AUTH[Auth Service<br/>üîê Authentification<br/>- Login/Logout<br/>- Gestion JWT<br/>- R√¥les utilisateurs<br/>- Multi-tenant]
        
        PROPERTY[Property Service<br/>üè† Gestion des Biens<br/>- CRUD propri√©t√©s<br/>- Photos/documents<br/>- Recherche<br/>- Disponibilit√©]
        
        TENANT[Tenant Service<br/>üë• Gestion des Locataires<br/>- Dossiers locataires<br/>- Historique<br/>- Communications<br/>- Documents]
        
        PAYMENT[Payment Service<br/>üí∞ Gestion des Paiements<br/>- Loyers<br/>- Charges<br/>- Retards<br/>- Comptabilit√©]
        
        CONTRACT[Contract Service<br/>üìÑ Gestion des Baux<br/>- Contrats<br/>- Renouvellements<br/>- R√©siliations<br/>- Signatures]
        
        NOTIF[Notification Service<br/>üìß Notifications<br/>- Emails<br/>- SMS<br/>- Rappels<br/>- Alertes]
    end
    
    %% Bases de donn√©es
    subgraph "BASES DE DONN√âES"
        AUTH_DB[(Auth DB<br/>Utilisateurs<br/>Sessions)]
        PROP_DB[(Property DB<br/>Biens<br/>Photos)]
        TENANT_DB[(Tenant DB<br/>Locataires<br/>Dossiers)]
        PAYMENT_DB[(Payment DB<br/>Transactions<br/>Factures)]
        CONTRACT_DB[(Contract DB<br/>Contrats<br/>Documents)]
    end
    
    %% Services externes
    subgraph "SERVICES EXTERNES"
        STRIPE[Stripe<br/>Paiements]
        SENDGRID[SendGrid<br/>Emails]
        STORAGE[Stockage<br/>Fichiers]
    end
    
    %% Connexions
    FRONTEND --> GATEWAY
    
    GATEWAY --> AUTH
    GATEWAY --> PROPERTY
    GATEWAY --> TENANT
    GATEWAY --> PAYMENT
    GATEWAY --> CONTRACT
    GATEWAY --> NOTIF
    
    AUTH --> AUTH_DB
    PROPERTY --> PROP_DB
    TENANT --> TENANT_DB
    PAYMENT --> PAYMENT_DB
    CONTRACT --> CONTRACT_DB
    
    PAYMENT --> STRIPE
    NOTIF --> SENDGRID
    PROPERTY --> STORAGE
    CONTRACT --> STORAGE
    
    %% √âv√©nements entre services
    PROPERTY -.-> NOTIF
    TENANT -.-> NOTIF
    PAYMENT -.-> NOTIF
    CONTRACT -.-> PAYMENT
    
    %% Styling
    classDef gateway fill:#ff9800,stroke:#e65100,stroke-width:3px,color:#fff
    classDef auth fill:#2196f3,stroke:#0d47a1,stroke-width:2px,color:#fff
    classDef business fill:#4caf50,stroke:#1b5e20,stroke-width:2px,color:#fff
    classDef data fill:#9c27b0,stroke:#4a148c,stroke-width:2px,color:#fff
    classDef external fill:#f44336,stroke:#b71c1c,stroke-width:2px,color:#fff
    classDef frontend fill:#607d8b,stroke:#263238,stroke-width:2px,color:#fff
    
    class GATEWAY gateway
    class AUTH auth
    class PROPERTY,TENANT,PAYMENT,CONTRACT,NOTIF business
    class AUTH_DB,PROP_DB,TENANT_DB,PAYMENT_DB,CONTRACT_DB data
    class STRIPE,SENDGRID,STORAGE external
    class FRONTEND frontend