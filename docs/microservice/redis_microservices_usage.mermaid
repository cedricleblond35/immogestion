graph TB
    %% Frontend
    FRONTEND[Frontend Angular]
    
    %% API Gateway avec Redis
    subgraph "API GATEWAY + REDIS"
        GATEWAY[API Gateway]
        REDIS_GW[Redis Gateway<br/>ðŸ”´ Rate Limiting<br/>ðŸ”´ Session Cache<br/>ðŸ”´ API Response Cache<br/>ðŸ”´ Circuit Breaker State]
    end
    
    %% Microservices avec Redis intÃ©grÃ©
    subgraph "AUTH SERVICE + REDIS"
        AUTH[Auth Service]
        REDIS_AUTH[Redis Auth<br/>ðŸ”´ JWT Blacklist<br/>ðŸ”´ Session Storage<br/>ðŸ”´ Login Attempts<br/>ðŸ”´ Password Reset Tokens]
    end
    
    subgraph "PROPERTY SERVICE + REDIS"
        PROPERTY[Property Service]
        REDIS_PROP[Redis Property<br/>ðŸ”´ Property Cache<br/>ðŸ”´ Search Results Cache<br/>ðŸ”´ Image Metadata Cache<br/>ðŸ”´ Statistics Cache]
    end
    
    subgraph "TENANT SERVICE + REDIS"
        TENANT[Tenant Service]
        REDIS_TENANT[Redis Tenant<br/>ðŸ”´ Tenant Profiles Cache<br/>ðŸ”´ Document Status Cache<br/>ðŸ”´ Application Cache<br/>ðŸ”´ Communication History]
    end
    
    subgraph "PAYMENT SERVICE + REDIS"
        PAYMENT[Payment Service]
        REDIS_PAY[Redis Payment<br/>ðŸ”´ Transaction Cache<br/>ðŸ”´ Payment Status<br/>ðŸ”´ Retry Queue<br/>ðŸ”´ Financial Reports Cache]
    end
    
    subgraph "NOTIFICATION SERVICE + REDIS"
        NOTIF[Notification Service]
        REDIS_NOTIF[Redis Notification<br/>ðŸ”´ Message Queue<br/>ðŸ”´ Delivery Status<br/>ðŸ”´ Template Cache<br/>ðŸ”´ User Preferences]
    end
    
    %% Event Bus Redis
    subgraph "EVENT SYSTEM"
        EVENT_BUS[Redis Pub/Sub<br/>ðŸ”´ Inter-Service Events<br/>ðŸ”´ Real-time Updates<br/>ðŸ”´ Saga Coordination<br/>ðŸ”´ Webhook Queue]
    end
    
    %% Connexions
    FRONTEND --> GATEWAY
    GATEWAY <--> REDIS_GW
    
    GATEWAY --> AUTH
    AUTH <--> REDIS_AUTH
    
    GATEWAY --> PROPERTY
    PROPERTY <--> REDIS_PROP
    
    GATEWAY --> TENANT
    TENANT <--> REDIS_TENANT
    
    GATEWAY --> PAYMENT
    PAYMENT <--> REDIS_PAY
    
    GATEWAY --> NOTIF
    NOTIF <--> REDIS_NOTIF
    
    %% Events entre services via Redis
    AUTH -.-> EVENT_BUS
    PROPERTY -.-> EVENT_BUS
    TENANT -.-> EVENT_BUS
    PAYMENT -.-> EVENT_BUS
    NOTIF -.-> EVENT_BUS
    
    EVENT_BUS -.-> AUTH
    EVENT_BUS -.-> PROPERTY
    EVENT_BUS -.-> TENANT
    EVENT_BUS -.-> PAYMENT
    EVENT_BUS -.-> NOTIF
    
    %% Styling
    classDef redis fill:#dc382d,stroke:#a42520,stroke-width:2px,color:#fff
    classDef service fill:#4caf50,stroke:#1b5e20,stroke-width:2px,color:#fff
    classDef gateway fill:#ff9800,stroke:#e65100,stroke-width:2px,color:#fff
    classDef frontend fill:#607d8b,stroke:#263238,stroke-width:2px,color:#fff
    classDef events fill:#9c27b0,stroke:#4a148c,stroke-width:2px,color:#fff
    
    class REDIS_GW,REDIS_AUTH,REDIS_PROP,REDIS_TENANT,REDIS_PAY,REDIS_NOTIF redis
    class AUTH,PROPERTY,TENANT,PAYMENT,NOTIF service
    class GATEWAY gateway
    class FRONTEND frontend
    class EVENT_BUS events